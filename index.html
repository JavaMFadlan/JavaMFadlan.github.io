<!DOCTYPE html>

<head>
    <title>Document</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>
    
</head>
<body>
    <a-scene cursor="rayOrigin: mouse">
        <a-assets>
                <img id="sky" src="img/clear-blue-sky.jpg" >
                <img id="sky-1" src="https://i.imgur.com/I7PAB.jpg" crossorigin="anonymous">
                <a-asset-item id="village" src="castle/scene.gltf"></a-asset-item>
                <a-asset-item id="desert" src="desert/scene.gltf"></a-asset-item>
                <a-asset-item id="float" src="floating/scene.gltf"></a-asset-item>
                <a-asset-item id="moai" src="moai/scene.gltf"></a-asset-item>
                <a-asset-item id="statue" src="statue/horse_statue_01_4k.gltf"></a-asset-item>
                <a-asset-item id="catapulte-o" src="White-TailedDeer_V1/12961_White-Tailed_Deer_v1_l2.obj"></a-asset-item>
                <a-asset-item id="catapulte-m" src="White-TailedDeer_V1/12961_White-Tailed_Deer_v1_l2.mtl"></a-asset-item>
                <a-asset-item id="horse-o" src="horse/horse_obj.obj"></a-asset-item>
                <a-asset-item id="horse-m" src="horse/horse_mtl.mtl"></a-asset-item>
        </a-assets>

        <a-entity position="-80 2 40">
            <a-camera></a-camera>
        </a-entity>
        

        <!-- sky -->
        <a-sky src="#sky"></a-sky>

        <a-entity id="env" environment="preset: forest"></a-entity>
        <a-entity id="place" gltf-model="#village"></a-entity>
        
        

        <a-entity position="-68.2 3.5 40"  rotation="0 90 0">
            <a-marker preset='hiro' id="hiro" >
                <!-- <a-entity id="place" gltf-model="#village" scale="0.01 0.01 0.01"> -->
                </a-entity>
            </a-marker>
            <!-- <a-plane src="img/hiro.png" height="1" width="1" ></a-plane> -->
        </a-entity>

        <!-- village -->
        <a-entity
            id="catapult-obj"
            obj-model="obj: #catapulte-o; mtl: #catapulte-m"
            position="-70 0.3 40"
            scale="0.05 0.05 0.05"
            rotation="-90 0 0"
            clickable>
        </a-entity>
        <a-entity 
            id="moai-obj"
            gltf-model="#moai"
            position="-60 7.5 20"
            scale="1 1 1"
            rotation="0 208 0"
            clickable>
        </a-entity>
        <a-entity 
            id="statue-obj"
            gltf-model="#statue"
            position="-65 1 13"
            scale="30 30 30"
            rotation="0 208 0"
            clickable>
        </a-entity>

        <!-- desert -->
        <!-- <a-entity
            id="catapult-obj"
            obj-model="obj: #catapulte-o; mtl: #catapulte-m"
            position="-16 -0.7 0"
            scale="0.005 0.005 0.005"
            rotation="0 -170 0"
            clickable>
        </a-entity>
        <a-entity 
            id="moai-obj"
            gltf-model="#moai"
            position="-15 -2 30"
            scale="1 1 1"
            rotation="0 210 0"
            clickable>
        </a-entity>
        <a-entity 
            id="statue-obj"
            gltf-model="#statue"
            position="6 4.5 23"
            scale="20 20 20"
            rotation="0 0 0"
            clickable>
        </a-entity> -->

        <!-- floating -->
        <!-- <a-entity
            id="catapult-obj"
            obj-model="obj: #catapulte-o; mtl: #catapulte-m"
            position="24.5 -3 -40"
            scale="0.005 0.005 0.005"
            rotation="0 90 0"
            clickable>
        </a-entity>
        <a-entity 
            id="moai-obj"
            gltf-model="#moai"
            position="-17 22 -9"
            scale="1 1 1"
            rotation="0 210 0"
            clickable>
        </a-entity>
        <a-entity 
            id="statue-obj"
            gltf-model="#statue"
            position="24.5 -3 -30"
            scale="20 20 20"
            rotation="0 90 0"
            clickable>
        </a-entity> -->

    </a-scene>



    <script>
        document.getElementById('hiro').addEventListener('markerFound', function() {
            // Ketika marker terdeteksi, beralih ke file kedua (second.html)
            window.location.href = "map.html";
        });
        
        // Function to handle the click event
        function handleClickVillage() {
            var catapultObj = document.getElementById('catapult-obj');
            var statueObj = document.getElementById('statue-obj');
            var moaiObj = document.getElementById('moai-obj');
            const sky = document.querySelector('a-sky');
            const place = document.getElementById('place');
            const env = document.getElementById('env');
            
                sky.setAttribute('visible', true);
                place.setAttribute('gltf-model', place.getAttribute('gltf-model') === 'floating/scene.gltf' || place.getAttribute('gltf-model') === 'desert/scene.gltf' ? 'castle/scene.gltf' : 'castle/scene.gltf');
                env.setAttribute('environment', 'preset: forest');
                env.setAttribute('visible', true);
                catapultObj.setAttribute('position', '-70 0.3 40');
                catapultObj.setAttribute('scale', '0.05 0.05 0.05');
                catapultObj.setAttribute('rotation', '0 0 0');
    
                // Restore moai-obj attributes
                moaiObj.setAttribute('position', '-60 7.5 20');
                moaiObj.setAttribute('rotation', '0 208 0');
    
                // Restore statue-obj attributes
                statueObj.setAttribute('position', '-65 1 13');
                statueObj.setAttribute('scale', '30 30 30');
                statueObj.setAttribute('rotation', '0 208 0');

        }
        function handleClickDesert() {
            var catapultObj = document.getElementById('catapult-obj');
            var moaiObj = document.getElementById('moai-obj');
            var statueObj = document.getElementById('statue-obj');
            const sky = document.querySelector('a-sky');
            const place = document.getElementById('place');
            
                sky.setAttribute('visible', true);
                place.setAttribute('gltf-model', place.getAttribute('gltf-model') === 'castle/scene.gltf' || place.getAttribute('gltf-model') === 'float/scene.gltf'  ? 'desert/scene.gltf' : 'desert/scene.gltf');
                env.setAttribute('environment', 'preset: yavapai; ground: flat, position: 0 -20 0');
                env.setAttribute('visible', true);
                // Update catapult-obj attributes
                catapultObj.setAttribute('position', '-16 -0.7 0');
                catapultObj.setAttribute('scale', '0.05 0.05 0.05');
                catapultObj.setAttribute('rotation', '0 0 0');
    
                // Update moai-obj attributes
                moaiObj.setAttribute('position', '-15 -2 30');
                moaiObj.setAttribute('rotation', '0 210 0');
    
                // Update statue-obj attributes
                statueObj.setAttribute('position', '6 4.5 23');
                statueObj.setAttribute('scale', '20 20 20');
                statueObj.setAttribute('rotation', '0 0 0');
            
        }

        function handleClickFloat() {
            var catapultObj = document.getElementById('catapult-obj');
            var moaiObj = document.getElementById('moai-obj');
            var statueObj = document.getElementById('statue-obj');
            const sky = document.querySelector('a-sky');
            const place = document.getElementById('place');
            
                sky.setAttribute('visible', false);
                place.setAttribute('gltf-model', place.getAttribute('gltf-model') === 'castle/scene.gltf' || place.getAttribute('gltf-model') === 'desert/scene.gltf' ? 'floating/scene.gltf' : 'floating/scene.gltf');
                env.setAttribute('environment', 'preset: starry; position: 0 -200 0');
                env.setAttribute('visible', true);
                // Update attributes for catapult-obj
                catapultObj.setAttribute('position', '24.5 -3 -40');
                catapultObj.setAttribute('scale', '0.05 0.05 0.05');
                catapultObj.setAttribute('rotation', '0 0 0');
    
                // Update attributes for moai-obj
                moaiObj.setAttribute('position', '-17 22 -9');
                moaiObj.setAttribute('rotation', '0 210 0');
    
                // Update attributes for statue-obj
                statueObj.setAttribute('position', '24.5 -3 -30');
                statueObj.setAttribute('scale', '20 20 20');
                statueObj.setAttribute('rotation', '0 0 0');
        }
  
        // Register the click event handler
        document.querySelector('#moai-obj').addEventListener('click', handleClickVillage);
        document.querySelector('#statue-obj').addEventListener('click', handleClickDesert);
        document.querySelector('#catapult-obj').addEventListener('click', handleClickFloat);
      </script>
</body>
</html>